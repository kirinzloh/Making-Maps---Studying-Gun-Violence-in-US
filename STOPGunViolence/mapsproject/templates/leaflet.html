{% load static %}

<!doctype html>
<html lang="en">
    <head>
        {% include "head.html" %}
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="{% static 'css/leaflet.css' %}">
        <link rel="stylesheet" href="{% static 'css/qgis2web.css' %}">
        <link rel="stylesheet" href="{% static 'css/leaflet-search.css' %}">
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding-top: 65px;
            margin: 0;
        }
        </style>
        <title>STOP Gun Violence - Leaflet</title>
    </head>
    <body>
        {% include "nav_bar.html" %}
        <div id="map">
        </div>
        <script src="{% static 'js/qgis2web_expressions.js' %}"></script>
        <script src="{% static 'js/leaflet.js' %}"></script>
        <script src="{% static 'js/leaflet.rotatedMarker.js' %}"></script>
        <script src="{% static 'js/leaflet.pattern.js' %}"></script>
        <script src="{% static 'js/leaflet-hash.js' %}"></script>
        <script src="{% static 'js/Autolinker.min.js' %}"></script>
        <script src="{% static 'js/rbush.min.js' %}"></script>
        <script src="{% static 'js/labelgun.min.js' %}"></script>
        <script src="{% static 'js/labels.js' %}"></script>
        <script src="{% static 'js/leaflet-search.js' %}"></script>
        <script src="{% static 'data/PopulationDensityResidentsperSquareMile_0.js' %}"></script>
        <script src="{% static 'data/UnemploymentLevelofpeople_1.js' %}"></script>
        <script src="{% static 'data/EducationalAttainmentBachelorDegreeofpeople_2.js' %}"></script>
        <script src="{% static 'data/WeaponOwnershipofpeople_3.js' %}"></script>
        <script src="{% static 'data/FirearmRateper100kPopulation_4.js' %}"></script>
        <script>
        var highlightLayer;
        function highlightFeature(e) {
            highlightLayer = e.target;

            if (e.target.feature.geometry.type === 'LineString') {
              highlightLayer.setStyle({
                color: '#ffff00',
              });
            } else {
              highlightLayer.setStyle({
                fillColor: '#ffff00',
                fillOpacity: 1
              });
            }
        }
        var map = L.map('map', {
            zoomControl:true, maxZoom:5, minZoom:2
        })

        var hash = new L.Hash(map);
        map.attributionControl.addAttribution('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a>');
        var bounds_group = new L.featureGroup([]);
        var basemap0 = L.tileLayer('http://{s}.www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
            maxZoom: 5
        });
        basemap0.addTo(map);
        {#function setBounds() {#}
        {#    if (bounds_group.getLayers().length) {#}
        {#        map.fitBounds(bounds_group.getBounds());#}
        {#    }#}
        {#    map.setMaxBounds(map.getBounds());#}
        {#}#}

        map.setView([47.563164, -112.046265], 3);

        function pop_PopulationDensityResidentsperSquareMile_0(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2"><strong>State Name</strong><br />' + (feature.properties['NAME'] !== null ? Autolinker.link(String(feature.properties['NAME'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Firearm rate per 100k pop</strong><br />' + (feature.properties['Overalldata_FA16rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_FA16rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Weapon ownership (dec notation)</strong><br />' + (feature.properties['Overalldata_Weapon_Ownership_ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Weapon_Ownership_ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Bachelor degree attainment (dec notation)</strong><br />' + (feature.properties['Overalldata_Bachelor_Degree_Ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Bachelor_Degree_Ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Unemployment Rate (% of pop)</strong><br />' + (feature.properties['Overalldata_Unemployment_Rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Unemployment_Rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Residuals</strong><br />' + (feature.properties['Overalldata_residuals'] !== null ? Autolinker.link(String(feature.properties['Overalldata_residuals'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Population Density (# Residents per Square Mile)</strong><br />' + (feature.properties['Overalldata_Population Density'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Population Density'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Overalldata_A</strong><br />' + (feature.properties['Overalldata_A'] !== null ? Autolinker.link(String(feature.properties['Overalldata_A'])) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_PopulationDensityResidentsperSquareMile_0_0(feature) {
            if (feature.properties['Overalldata_Population Density'] >= 1.000000 && feature.properties['Overalldata_Population Density'] <= 113.000000 ) {
                return {
                pane: 'pane_PopulationDensityResidentsperSquareMile_0',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(247,251,255,1.0)',
            }
            }
            if (feature.properties['Overalldata_Population Density'] >= 113.000000 && feature.properties['Overalldata_Population Density'] <= 286.000000 ) {
                return {
                pane: 'pane_PopulationDensityResidentsperSquareMile_0',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(200,221,240,1.0)',
            }
            }
            if (feature.properties['Overalldata_Population Density'] >= 286.000000 && feature.properties['Overalldata_Population Density'] <= 494.000000 ) {
                return {
                pane: 'pane_PopulationDensityResidentsperSquareMile_0',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(115,179,216,1.0)',
            }
            }
            if (feature.properties['Overalldata_Population Density'] >= 494.000000 && feature.properties['Overalldata_Population Density'] <= 879.000000 ) {
                return {
                pane: 'pane_PopulationDensityResidentsperSquareMile_0',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(40,121,185,1.0)',
            }
            }
            if (feature.properties['Overalldata_Population Density'] >= 879.000000 && feature.properties['Overalldata_Population Density'] <= 1225.000000 ) {
                return {
                pane: 'pane_PopulationDensityResidentsperSquareMile_0',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(8,48,107,1.0)',
            }
            }
        }
        map.createPane('pane_PopulationDensityResidentsperSquareMile_0');
        map.getPane('pane_PopulationDensityResidentsperSquareMile_0').style.zIndex = 400;
        map.getPane('pane_PopulationDensityResidentsperSquareMile_0').style['mix-blend-mode'] = 'normal';
        var layer_PopulationDensityResidentsperSquareMile_0 = new L.geoJson(json_PopulationDensityResidentsperSquareMile_0, {
            attribution: '<a href=""></a>',
            pane: 'pane_PopulationDensityResidentsperSquareMile_0',
            onEachFeature: pop_PopulationDensityResidentsperSquareMile_0,
            style: style_PopulationDensityResidentsperSquareMile_0_0,
        });
        bounds_group.addLayer(layer_PopulationDensityResidentsperSquareMile_0);
        map.addLayer(layer_PopulationDensityResidentsperSquareMile_0);
        function pop_UnemploymentLevelofpeople_1(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2"><strong>State Name</strong><br />' + (feature.properties['NAME'] !== null ? Autolinker.link(String(feature.properties['NAME'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Firearm rate per 100k pop</strong><br />' + (feature.properties['Overalldata_FA16rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_FA16rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Weapon ownership (dec notation)</strong><br />' + (feature.properties['Overalldata_Weapon_Ownership_ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Weapon_Ownership_ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Bachelor degree attainment (dec notation)</strong><br />' + (feature.properties['Overalldata_Bachelor_Degree_Ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Bachelor_Degree_Ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Unemployment Rate (% of pop)</strong><br />' + (feature.properties['Overalldata_Unemployment_Rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Unemployment_Rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Residuals</strong><br />' + (feature.properties['Overalldata_residuals'] !== null ? Autolinker.link(String(feature.properties['Overalldata_residuals'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Population Density (# Residents per Square Mile)</strong><br />' + (feature.properties['Overalldata_Population Density'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Population Density'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Overalldata_A</strong><br />' + (feature.properties['Overalldata_A'] !== null ? Autolinker.link(String(feature.properties['Overalldata_A'])) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_UnemploymentLevelofpeople_1_0(feature) {
            if (feature.properties['Overalldata_Unemployment_Rate'] >= 2.400000 && feature.properties['Overalldata_Unemployment_Rate'] <= 3.100000 ) {
                return {
                pane: 'pane_UnemploymentLevelofpeople_1',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(247,251,255,1.0)',
            }
            }
            if (feature.properties['Overalldata_Unemployment_Rate'] >= 3.100000 && feature.properties['Overalldata_Unemployment_Rate'] <= 3.800000 ) {
                return {
                pane: 'pane_UnemploymentLevelofpeople_1',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(200,221,240,1.0)',
            }
            }
            if (feature.properties['Overalldata_Unemployment_Rate'] >= 3.800000 && feature.properties['Overalldata_Unemployment_Rate'] <= 4.500000 ) {
                return {
                pane: 'pane_UnemploymentLevelofpeople_1',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(115,179,216,1.0)',
            }
            }
            if (feature.properties['Overalldata_Unemployment_Rate'] >= 4.500000 && feature.properties['Overalldata_Unemployment_Rate'] <= 5.200000 ) {
                return {
                pane: 'pane_UnemploymentLevelofpeople_1',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(40,121,185,1.0)',
            }
            }
            if (feature.properties['Overalldata_Unemployment_Rate'] >= 5.200000 && feature.properties['Overalldata_Unemployment_Rate'] <= 7.200000 ) {
                return {
                pane: 'pane_UnemploymentLevelofpeople_1',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(8,48,107,1.0)',
            }
            }
        }
        map.createPane('pane_UnemploymentLevelofpeople_1');
        map.getPane('pane_UnemploymentLevelofpeople_1').style.zIndex = 401;
        map.getPane('pane_UnemploymentLevelofpeople_1').style['mix-blend-mode'] = 'normal';
        var layer_UnemploymentLevelofpeople_1 = new L.geoJson(json_UnemploymentLevelofpeople_1, {
            attribution: '<a href=""></a>',
            pane: 'pane_UnemploymentLevelofpeople_1',
            onEachFeature: pop_UnemploymentLevelofpeople_1,
            style: style_UnemploymentLevelofpeople_1_0,
        });
        bounds_group.addLayer(layer_UnemploymentLevelofpeople_1);
        map.addLayer(layer_UnemploymentLevelofpeople_1);
        function pop_EducationalAttainmentBachelorDegreeofpeople_2(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2"><strong>State Name</strong><br />' + (feature.properties['NAME'] !== null ? Autolinker.link(String(feature.properties['NAME'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Firearm rate per 100k pop</strong><br />' + (feature.properties['Overalldata_FA16rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_FA16rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Weapon ownership (dec notation)</strong><br />' + (feature.properties['Overalldata_Weapon_Ownership_ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Weapon_Ownership_ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Bachelor degree attainment (dec notation)</strong><br />' + (feature.properties['Overalldata_Bachelor_Degree_Ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Bachelor_Degree_Ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Unemployment Rate (% of pop)</strong><br />' + (feature.properties['Overalldata_Unemployment_Rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Unemployment_Rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Residuals</strong><br />' + (feature.properties['Overalldata_residuals'] !== null ? Autolinker.link(String(feature.properties['Overalldata_residuals'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Population Density (# Residents per Square Mile)</strong><br />' + (feature.properties['Overalldata_Population Density'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Population Density'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Overalldata_A</strong><br />' + (feature.properties['Overalldata_A'] !== null ? Autolinker.link(String(feature.properties['Overalldata_A'])) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_EducationalAttainmentBachelorDegreeofpeople_2_0(feature) {
            if (feature.properties['Overalldata_Bachelor_Degree_Ratio'] >= 0.192000 && feature.properties['Overalldata_Bachelor_Degree_Ratio'] <= 0.230000 ) {
                return {
                pane: 'pane_EducationalAttainmentBachelorDegreeofpeople_2',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(247,251,255,1.0)',
            }
            }
            if (feature.properties['Overalldata_Bachelor_Degree_Ratio'] >= 0.230000 && feature.properties['Overalldata_Bachelor_Degree_Ratio'] <= 0.263000 ) {
                return {
                pane: 'pane_EducationalAttainmentBachelorDegreeofpeople_2',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(200,221,240,1.0)',
            }
            }
            if (feature.properties['Overalldata_Bachelor_Degree_Ratio'] >= 0.263000 && feature.properties['Overalldata_Bachelor_Degree_Ratio'] <= 0.295000 ) {
                return {
                pane: 'pane_EducationalAttainmentBachelorDegreeofpeople_2',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(115,179,216,1.0)',
            }
            }
            if (feature.properties['Overalldata_Bachelor_Degree_Ratio'] >= 0.295000 && feature.properties['Overalldata_Bachelor_Degree_Ratio'] <= 0.349000 ) {
                return {
                pane: 'pane_EducationalAttainmentBachelorDegreeofpeople_2',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(40,121,185,1.0)',
            }
            }
            if (feature.properties['Overalldata_Bachelor_Degree_Ratio'] >= 0.349000 && feature.properties['Overalldata_Bachelor_Degree_Ratio'] <= 0.405000 ) {
                return {
                pane: 'pane_EducationalAttainmentBachelorDegreeofpeople_2',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(8,48,107,1.0)',
            }
            }
        }
        map.createPane('pane_EducationalAttainmentBachelorDegreeofpeople_2');
        map.getPane('pane_EducationalAttainmentBachelorDegreeofpeople_2').style.zIndex = 402;
        map.getPane('pane_EducationalAttainmentBachelorDegreeofpeople_2').style['mix-blend-mode'] = 'normal';
        var layer_EducationalAttainmentBachelorDegreeofpeople_2 = new L.geoJson(json_EducationalAttainmentBachelorDegreeofpeople_2, {
            attribution: '<a href=""></a>',
            pane: 'pane_EducationalAttainmentBachelorDegreeofpeople_2',
            onEachFeature: pop_EducationalAttainmentBachelorDegreeofpeople_2,
            style: style_EducationalAttainmentBachelorDegreeofpeople_2_0,
        });
        bounds_group.addLayer(layer_EducationalAttainmentBachelorDegreeofpeople_2);
        map.addLayer(layer_EducationalAttainmentBachelorDegreeofpeople_2);
        function pop_WeaponOwnershipofpeople_3(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2"><strong>State Name</strong><br />' + (feature.properties['NAME'] !== null ? Autolinker.link(String(feature.properties['NAME'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Firearm rate per 100k pop</strong><br />' + (feature.properties['Overalldata_FA16rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_FA16rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Weapon ownership (dec notation)</strong><br />' + (feature.properties['Overalldata_Weapon_Ownership_ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Weapon_Ownership_ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Bachelor degree attainment (dec notation)</strong><br />' + (feature.properties['Overalldata_Bachelor_Degree_Ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Bachelor_Degree_Ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Unemployment Rate (% of pop)</strong><br />' + (feature.properties['Overalldata_Unemployment_Rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Unemployment_Rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Residuals</strong><br />' + (feature.properties['Overalldata_residuals'] !== null ? Autolinker.link(String(feature.properties['Overalldata_residuals'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Population Density (# Residents per Square Mile)</strong><br />' + (feature.properties['Overalldata_Population Density'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Population Density'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Overalldata_A</strong><br />' + (feature.properties['Overalldata_A'] !== null ? Autolinker.link(String(feature.properties['Overalldata_A'])) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_WeaponOwnershipofpeople_3_0(feature) {
            if (feature.properties['Overalldata_Weapon_Ownership_ratio'] >= 0.000000 && feature.properties['Overalldata_Weapon_Ownership_ratio'] <= 0.009420 ) {
                return {
                pane: 'pane_WeaponOwnershipofpeople_3',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(247,251,255,1.0)',
            }
            }
            if (feature.properties['Overalldata_Weapon_Ownership_ratio'] >= 0.009420 && feature.properties['Overalldata_Weapon_Ownership_ratio'] <= 0.018486 ) {
                return {
                pane: 'pane_WeaponOwnershipofpeople_3',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(200,221,240,1.0)',
            }
            }
            if (feature.properties['Overalldata_Weapon_Ownership_ratio'] >= 0.018486 && feature.properties['Overalldata_Weapon_Ownership_ratio'] <= 0.029503 ) {
                return {
                pane: 'pane_WeaponOwnershipofpeople_3',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(115,179,216,1.0)',
            }
            }
            if (feature.properties['Overalldata_Weapon_Ownership_ratio'] >= 0.029503 && feature.properties['Overalldata_Weapon_Ownership_ratio'] <= 0.048041 ) {
                return {
                pane: 'pane_WeaponOwnershipofpeople_3',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(40,121,185,1.0)',
            }
            }
            if (feature.properties['Overalldata_Weapon_Ownership_ratio'] >= 0.048041 && feature.properties['Overalldata_Weapon_Ownership_ratio'] <= 0.227054 ) {
                return {
                pane: 'pane_WeaponOwnershipofpeople_3',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(8,48,107,1.0)',
            }
            }
        }
        map.createPane('pane_WeaponOwnershipofpeople_3');
        map.getPane('pane_WeaponOwnershipofpeople_3').style.zIndex = 403;
        map.getPane('pane_WeaponOwnershipofpeople_3').style['mix-blend-mode'] = 'normal';
        var layer_WeaponOwnershipofpeople_3 = new L.geoJson(json_WeaponOwnershipofpeople_3, {
            attribution: '<a href=""></a>',
            pane: 'pane_WeaponOwnershipofpeople_3',
            onEachFeature: pop_WeaponOwnershipofpeople_3,
            style: style_WeaponOwnershipofpeople_3_0,
        });
        bounds_group.addLayer(layer_WeaponOwnershipofpeople_3);
        map.addLayer(layer_WeaponOwnershipofpeople_3);
        function pop_FirearmRateper100kPopulation_4(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2"><strong>State Name</strong><br />' + (feature.properties['NAME'] !== null ? Autolinker.link(String(feature.properties['NAME'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Firearm rate per 100k pop</strong><br />' + (feature.properties['Overalldata_FA16rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_FA16rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Weapon ownership (dec notation)</strong><br />' + (feature.properties['Overalldata_Weapon_Ownership_ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Weapon_Ownership_ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Bachelor degree attainment (dec notation)</strong><br />' + (feature.properties['Overalldata_Bachelor_Degree_Ratio'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Bachelor_Degree_Ratio'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Unemployment Rate (% of pop)</strong><br />' + (feature.properties['Overalldata_Unemployment_Rate'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Unemployment_Rate'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Residuals</strong><br />' + (feature.properties['Overalldata_residuals'] !== null ? Autolinker.link(String(feature.properties['Overalldata_residuals'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Population Density (# Residents per Square Mile)</strong><br />' + (feature.properties['Overalldata_Population Density'] !== null ? Autolinker.link(String(feature.properties['Overalldata_Population Density'])) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2"><strong>Overalldata_A</strong><br />' + (feature.properties['Overalldata_A'] !== null ? Autolinker.link(String(feature.properties['Overalldata_A'])) : '') + '</td>\
                    </tr>\
                </table>';
            layer.bindPopup(popupContent, {maxHeight: 400});
        }

        function style_FirearmRateper100kPopulation_4_0(feature) {
            if (feature.properties['Overalldata_FA16rate'] >= 3.000000 && feature.properties['Overalldata_FA16rate'] <= 6.000000 ) {
                return {
                pane: 'pane_FirearmRateper100kPopulation_4',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(247,251,255,1.0)',
            }
            }
            if (feature.properties['Overalldata_FA16rate'] >= 6.000000 && feature.properties['Overalldata_FA16rate'] <= 9.000000 ) {
                return {
                pane: 'pane_FirearmRateper100kPopulation_4',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(200,221,240,1.0)',
            }
            }
            if (feature.properties['Overalldata_FA16rate'] >= 9.000000 && feature.properties['Overalldata_FA16rate'] <= 14.000000 ) {
                return {
                pane: 'pane_FirearmRateper100kPopulation_4',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(115,179,216,1.0)',
            }
            }
            if (feature.properties['Overalldata_FA16rate'] >= 14.000000 && feature.properties['Overalldata_FA16rate'] <= 18.000000 ) {
                return {
                pane: 'pane_FirearmRateper100kPopulation_4',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(40,121,185,1.0)',
            }
            }
            if (feature.properties['Overalldata_FA16rate'] >= 18.000000 && feature.properties['Overalldata_FA16rate'] <= 23.000000 ) {
                return {
                pane: 'pane_FirearmRateper100kPopulation_4',
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(8,48,107,1.0)',
            }
            }
        }
        map.createPane('pane_FirearmRateper100kPopulation_4');
        map.getPane('pane_FirearmRateper100kPopulation_4').style.zIndex = 404;
        map.getPane('pane_FirearmRateper100kPopulation_4').style['mix-blend-mode'] = 'normal';
        var layer_FirearmRateper100kPopulation_4 = new L.geoJson(json_FirearmRateper100kPopulation_4, {
            attribution: '<a href=""></a>',
            pane: 'pane_FirearmRateper100kPopulation_4',
            onEachFeature: pop_FirearmRateper100kPopulation_4,
            style: style_FirearmRateper100kPopulation_4_0,
        });
        bounds_group.addLayer(layer_FirearmRateper100kPopulation_4);
        map.addLayer(layer_FirearmRateper100kPopulation_4);
        var baseMaps = {};
        L.control.layers(baseMaps,{'Firearm Rate per 100k Population<br /><table><tr><td style="text-align: center;"><img src="{% static 'legend/FirearmRateper100kPopulation_4_360.png' %}" /></td><td> 3 - 6</td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/FirearmRateper100kPopulation_4_691.png' %}" /></td><td> 6 - 9</td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/FirearmRateper100kPopulation_4_9142.png' %}" /></td><td> 9 - 14</td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/FirearmRateper100kPopulation_4_14183.png' %}" /></td><td> 14 - 18</td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/FirearmRateper100kPopulation_4_18234.png' %}" /></td><td> 18 - 23 </td></tr></table>': layer_FirearmRateper100kPopulation_4,'Weapon Ownership (% of people)<br /><table><tr><td style="text-align: center;"><img src="{% static 'legend/WeaponOwnershipofpeople_3_00940.png' %}" /></td><td> 0% - 0.94% </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/WeaponOwnershipofpeople_3_0941851.png' %}" /></td><td> 0.94% - 1.85%</td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/WeaponOwnershipofpeople_3_1852952.png' %}" /></td><td> 1.85% - 2.95% </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/WeaponOwnershipofpeople_3_2954803.png' %}" /></td><td> 2.95% - 4.80% </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/WeaponOwnershipofpeople_3_48022714.png' %}" /></td><td> 4.80% - 22.71% </td></tr></table>': layer_WeaponOwnershipofpeople_3,'Educational Attainment: Bachelor Degree (% of people)<br /><table><tr><td style="text-align: center;"><img src="{% static 'legend/EducationalAttainmentBachelorDegreeofpeople_2_019202300.png' %}" /></td><td> 0.192 - 0.230 </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/EducationalAttainmentBachelorDegreeofpeople_2_232631.png' %}" /></td><td> 23% - 26.3% </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/EducationalAttainmentBachelorDegreeofpeople_2_2632952.png' %}" /></td><td> 26.3% - 29.5%</td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/EducationalAttainmentBachelorDegreeofpeople_2_2953493.png' %}" /></td><td> 29.5% - 34.9% </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/EducationalAttainmentBachelorDegreeofpeople_2_3494054.png' %}" /></td><td> 34.9% - 40.5% </td></tr></table>': layer_EducationalAttainmentBachelorDegreeofpeople_2,'Unemployment Level (% of people)<br /><table><tr><td style="text-align: center;"><img src="{% static 'legend/UnemploymentLevelofpeople_1_24310.png' %}" /></td><td>2.4% - 3.1%</td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/UnemploymentLevelofpeople_1_31381.png' %}" /></td><td> 3.1% - 3.8% </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/UnemploymentLevelofpeople_1_38452.png' %}" /></td><td> 3.8% - 4.5% </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/UnemploymentLevelofpeople_1_45523.png' %}" /></td><td> 4.5% - 5.2%</td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/UnemploymentLevelofpeople_1_52724.png' %}" /></td><td> 5.2% - 7.2% </td></tr></table>': layer_UnemploymentLevelofpeople_1,'Population Density (# Residents per Square Mile)<br /><table><tr><td style="text-align: center;"><img src="{% static 'legend/PopulationDensityResidentsperSquareMile_0_11130.png' %}" /></td><td> 1 - 113 </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/PopulationDensityResidentsperSquareMile_0_1132861.png' %}" /></td><td> 113 - 286 </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/PopulationDensityResidentsperSquareMile_0_2864942.png' %}" /></td><td> 286 - 494 </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/PopulationDensityResidentsperSquareMile_0_4948793.png' %}" /></td><td> 494 - 879 </td></tr><tr><td style="text-align: center;"><img src="{% static 'legend/PopulationDensityResidentsperSquareMile_0_87912254.png' %}" /></td><td> 879 - 1225 </td></tr></table>': layer_PopulationDensityResidentsperSquareMile_0,}).addTo(map);
        map.on("zoomend", function(){

            if (map.hasLayer(layer_PopulationDensityResidentsperSquareMile_0)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_PopulationDensityResidentsperSquareMile_0.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_PopulationDensityResidentsperSquareMile_0.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
            if (map.hasLayer(layer_UnemploymentLevelofpeople_1)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_UnemploymentLevelofpeople_1.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_UnemploymentLevelofpeople_1.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
            if (map.hasLayer(layer_EducationalAttainmentBachelorDegreeofpeople_2)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_EducationalAttainmentBachelorDegreeofpeople_2.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_EducationalAttainmentBachelorDegreeofpeople_2.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
            if (map.hasLayer(layer_WeaponOwnershipofpeople_3)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_WeaponOwnershipofpeople_3.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_WeaponOwnershipofpeople_3.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
            if (map.hasLayer(layer_FirearmRateper100kPopulation_4)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_FirearmRateper100kPopulation_4.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_FirearmRateper100kPopulation_4.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
        });
        setBounds();
        var i = 0;
        layer_PopulationDensityResidentsperSquareMile_0.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['NAME'] !== null?String('<div style="color: #000000; font-size: 13pt; font-family: \'Helvetica Neue\', sans-serif;">' + layer.feature.properties['NAME']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_PopulationDensityResidentsperSquareMile_0'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        var i = 0;
        layer_UnemploymentLevelofpeople_1.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['NAME'] !== null?String('<div style="color: #000000; font-size: 13pt; font-family: \'Helvetica Neue\', sans-serif;">' + layer.feature.properties['NAME']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_UnemploymentLevelofpeople_1'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        var i = 0;
        layer_EducationalAttainmentBachelorDegreeofpeople_2.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['NAME'] !== null?String('<div style="color: #000000; font-size: 13pt; font-family: \'Helvetica Neue\', sans-serif;">' + layer.feature.properties['NAME']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_EducationalAttainmentBachelorDegreeofpeople_2'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        var i = 0;
        layer_WeaponOwnershipofpeople_3.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['NAME'] !== null?String('<div style="color: #000000; font-size: 13pt; font-family: \'Helvetica Neue\', sans-serif;">' + layer.feature.properties['NAME']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_WeaponOwnershipofpeople_3'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        var i = 0;
        layer_FirearmRateper100kPopulation_4.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['NAME'] !== null?String('<div style="color: #000000; font-size: 13pt; font-family: \'Helvetica Neue\', sans-serif;">' + layer.feature.properties['NAME']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_FirearmRateper100kPopulation_4'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
            if (map.hasLayer(layer_PopulationDensityResidentsperSquareMile_0)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_PopulationDensityResidentsperSquareMile_0.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_PopulationDensityResidentsperSquareMile_0.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
            if (map.hasLayer(layer_UnemploymentLevelofpeople_1)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_UnemploymentLevelofpeople_1.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_UnemploymentLevelofpeople_1.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
            if (map.hasLayer(layer_EducationalAttainmentBachelorDegreeofpeople_2)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_EducationalAttainmentBachelorDegreeofpeople_2.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_EducationalAttainmentBachelorDegreeofpeople_2.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
            if (map.hasLayer(layer_WeaponOwnershipofpeople_3)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_WeaponOwnershipofpeople_3.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_WeaponOwnershipofpeople_3.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
            if (map.hasLayer(layer_FirearmRateper100kPopulation_4)) {
                if (map.getZoom() <= 19 && map.getZoom() >= 5) {
                    layer_FirearmRateper100kPopulation_4.eachLayer(function (layer) {
                        layer.openTooltip();
                    });
                } else {
                    layer_FirearmRateper100kPopulation_4.eachLayer(function (layer) {
                        layer.closeTooltip();
                    });
                }
            }
        map.addControl(new L.Control.Search({
            layer: layer_FirearmRateper100kPopulation_4,
            initial: false,
            hideMarkerOnCollapse: true,
            propertyName: 'NAME'}));
        resetLabels([layer_PopulationDensityResidentsperSquareMile_0,layer_UnemploymentLevelofpeople_1,layer_EducationalAttainmentBachelorDegreeofpeople_2,layer_WeaponOwnershipofpeople_3,layer_FirearmRateper100kPopulation_4]);
        map.on("zoomend", function(){
            resetLabels([layer_PopulationDensityResidentsperSquareMile_0,layer_UnemploymentLevelofpeople_1,layer_EducationalAttainmentBachelorDegreeofpeople_2,layer_WeaponOwnershipofpeople_3,layer_FirearmRateper100kPopulation_4]);
        });
        map.on("layeradd", function(){
            resetLabels([layer_PopulationDensityResidentsperSquareMile_0,layer_UnemploymentLevelofpeople_1,layer_EducationalAttainmentBachelorDegreeofpeople_2,layer_WeaponOwnershipofpeople_3,layer_FirearmRateper100kPopulation_4]);
        });
        map.on("layerremove", function(){
            resetLabels([layer_PopulationDensityResidentsperSquareMile_0,layer_UnemploymentLevelofpeople_1,layer_EducationalAttainmentBachelorDegreeofpeople_2,layer_WeaponOwnershipofpeople_3,layer_FirearmRateper100kPopulation_4]);
        });
        </script>
    </body>
</html>
